// Generated by CoffeeScript 1.3.3

/*
  app.coffee
*/


(function() {

  define(['chat', 'GameList', 'GameListView'], function(Chat, GameList, GameListView) {
    var initialize;
    initialize = function() {
      var gameList;
      gameList = new GameList;
      return $.get('/user', function(data) {
        var gameListView, socket;
        socket = io.connect();
        socket.emit('new user', {
          name: data.username,
          id: data.userid
        });
        Chat.initialize(socket, data.username);
        gameListView = new GameListView({
          games: gameList,
          playerid: data.userid,
          socket: socket
        });
        return gameList.fetch();
      });
    };
    return {
      initialize: initialize
    };
  });

}).call(this);
