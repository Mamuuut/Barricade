// Generated by CoffeeScript 1.5.0

/*
  app.coffee
*/


(function() {

  define(['ChatView', 'GameList', 'GameListView', 'BoardView', 'MainView'], function(ChatView, GameList, GameListView, BoardView, MainView) {
    var initialize;
    initialize = function() {
      var gameList;
      gameList = new GameList;
      return $.get('/user', function(user) {
        var socket,
          _this = this;
        socket = io.connect(socketio_base_url);
        return socket.on('connect', function() {
          var boardView, chatView, gameListView, mainView;
          socket.emit('new user', user);
          chatView = new ChatView({
            user: user,
            socket: socket
          });
          gameListView = new GameListView({
            games: gameList,
            player: user,
            socket: socket
          });
          gameList.fetch();
          boardView = new BoardView({
            playerid: user.id,
            socket: socket
          });
          return mainView = new MainView({
            user: user,
            socket: socket,
            gameListView: gameListView,
            boardView: boardView,
            chatView: chatView
          });
        });
      });
    };
    return {
      initialize: initialize
    };
  });

}).call(this);
