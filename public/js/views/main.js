// Generated by CoffeeScript 1.5.0
(function() {

  define(['backbone'], function(Backbone) {
    var MainView;
    MainView = Backbone.View.extend({
      el: $('body'),
      initialize: function() {
        var _this = this;
        this.socket = this.options.socket;
        this.gameListView = this.options.gameListView;
        this.boardView = this.options.boardView;
        this.chatView = this.options.chatView;
        this.gameListView.on('play', function(game) {
          _this.$('.content').find('div').addClass('playing');
          _this.boardView.play(game);
          return _this.chatView.minimize();
        });
        this.boardView.on('back', function() {
          _this.$('.content').find('div').removeClass('playing');
          return _this.chatView.maximize();
        });
        this.socket.on('update victories', function(nbVictories) {
          return $.get('/user', function(user) {
            return _this.updateVictories(user.victories);
          });
        });
        return this.updateVictories(this.options.user.victories);
      },
      updateVictories: function(nbVictories) {
        return this.$('#nb-victory').html(nbVictories);
      }
    });
    return MainView;
  });

}).call(this);
